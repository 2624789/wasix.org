## `thread_local_create()`

Create a thread local variable. If the WebAssembly process exports a function named `_thread_local_destroy`, it will be invoked when the thread goes out of scope and dies.

### Description

The `thread_local_create()` function creates a thread local variable within the WASI environment. Thread local variables are variables that are local to each thread and have their own separate instances in each thread's memory. If the WebAssembly process exports a function named `_thread_local_destroy`, it will be invoked when the thread goes out of scope and dies.

This function is similar to the POSIX `pthread_key_create()` function, which creates a thread-specific data key that can be used to associate thread-specific data.

### Syntax

```rust
pub fn thread_local_create<M: MemorySize>(
    ctx: FunctionEnvMut<'_, WasiEnv>,
    user_data: TlUser,
    ret_key: WasmPtr<TlKey, M>,
) -> Errno
```

### Parameters

- `ctx`: A mutable reference to the function environment.
- `user_data`: User data that will be passed to the destructor when the thread variable goes out of scope.
- `ret_key`: A pointer to the location where the key of the created thread local variable will be stored.

### Return Value

The function returns `Errno::Success` if the operation is successful. Otherwise, it returns an appropriate `Errno` value indicating the reason for the failure.

### Logging

This function is instrumented with `trace` level logging.

### Note

- The `thread_local_create()` function creates a thread local variable within the WASI environment.
- Thread local variables are variables that are local to each thread and have their own separate instances in each thread's memory.
- If the WebAssembly process exports a function named `_thread_local_destroy`, it will be invoked when the thread goes out of scope and dies.
- The `thread_local_create()` function takes user data as input, which will be passed to the destructor when the thread variable goes out of scope.
- After the thread local variable is created, its key is returned and stored in the location pointed to by `ret_key`.
- The `thread_local_create()` function is similar to the POSIX `pthread_key_create()` function, which creates a thread-specific data key that can be used to associate thread-specific data.
- Utilizing thread local variables allows each thread to have its own unique instance of a variable, providing thread-specific storage for data.
- Thread local variables are commonly used in multi-threaded applications to store thread-specific data and avoid data races or synchronization issues.
- Care should be taken when using thread local variables to ensure proper management of memory and resource cleanup when threads go out of scope and terminate.
- The `thread_local_create()` function provides a way to implement thread-specific data storage in the WASI environment, facilitating thread-local operations and maintaining thread safety.
